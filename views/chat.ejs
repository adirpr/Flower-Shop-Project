<!-- views/partials/chat.ejs -->
<div id="chat">
    <link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css' />
    <link href="/stylesheets/animate.css" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/chatStyle.css" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/avgrund.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="/javascripts/mqttws31.js"></script>
    <script type="text/javascript" src="/javascripts/encoder.js"></script>
    <script type="text/javascript" src="/javascripts/avgrund.js"></script>
    <script type="text/javascript" src="/javascripts/chat.io.js"></script>

    <div class="row">
        <div class=col-sm-12>
            <div class="jumbotron text-center">
                <h2><strong>{{ message }}</strong></h2>

                <div class="avgrund-contents">
                    <div class="pr center wrapper">
                        <div class="cf pr chat animate">
                            <div class="pa chat-shadow">
                                <div class="content animate bounceInDown">
                                    <div class="big-button-green start">Start</div>
                                </div>
                            </div>
                            <div class="cf chat-top">
                                <div class="fl chat-left">
                                    <div class="chat-messages">
                                        <ul></ul>
                                    </div>
                                </div>
                                <div class="fl chat-right">
                                    <div class="chat-clients">
                                        <div class="cf title">
                                            <div class="fl">Users</div>
                                        </div>
                                        <ul></ul>
                                    </div>
                                    <div class="chat-rooms">
                                        <div class="cf title">
                                            <div class="fl">Rooms</div>
                                            <div class="fr title-button">+</div>
                                        </div>
                                        <ul class="pr"></ul>
                                    </div>
                                </div>
                            </div>
                            <div class="cf chat-bottom">
                                <div class="fl chat-input">
                                    <input type="text" placeholder="write a message..." />
                                </div>
                                <div class="fl chat-upload">
                                    <label for="file-input" style="display: block; margin-top: 15px">
                                        <img src="images/cam32.png" style="display: block; margin: auto"/>
                                    </label>
                                    <input id="file-input" style="display: none;" type="file" name="attachment[]" multiple="1" accept="image/*">
                                </div>
                                <div class="fl chat-submit">
                                    <button>Send &rarr;</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>

                <aside id="nickname-popup" class="popup animate avgrund-popup">
                    <div class="title">Enter a nickname</div>
                    <div class="content">Please select a nickname, up to 15 characters</div>
                    <div class="input"><input type="text" maxlength="15" placeholder="nickname..." /></div>
                    <div class="big-button-green small begin">&mdash; Begin &mdash;</div>
                </aside>
                <aside id="addroom-popup" class="popup animate avgrund-popup avgrund-popup-room">
                    <div class="title">Enter a room name</div>
                    <div class="content">Room name up to 10 characters</div>
                    <div class="input"><input type="text" maxlength="10" placeholder="room name..." /></div>
                </aside>
                <aside id="password-popup" class="popup animate avgrund-popup">
                    <div style="display: none;" class="room-name"></div>
                    <div class="popup-title"></div>
                    <div class="input"><input type="password" maxlength="20" placeholder="password" /></div>
                    <div class="big-button-green small join">Join</div>
                </aside>
                <div class="avgrund-cover"></div>

                <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                <script type="text/javascript">
                    (function() {
                    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                    po.src = 'https://apis.google.com/js/plusone.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                    })();
                </script>
                <script type="text/javascript">
                $('h1 sup').on('click', function () {
                    if($('.chat').hasClass('bounceOutRight')){
                        $('.chat').removeClass('bounceOutRight');
                        $('.chat').addClass('bounceInLeft');
                        
                        $('.info').removeClass('bounceInLeft');
                        $('.info').addClass('bounceOutRight');
                        
                        window.setTimeout(function(){
                            $('.chat').removeClass('bounceInLeft');
                        }, 1500);
                    } else {
                        $('.chat').removeClass('bounceInLeft');
                        $('.chat').addClass('bounceOutRight');
                        
                        $('.info').removeClass('bounceOutRight');
                        $('.info').addClass('bounceInLeft');
                    }
                    
                });
                function togglePasswordField(input){
                    var $input = $(input);
                    if ($input.prop('checked')){
                        $('.avgrund-popup-room').height(300);
                        $('#password').show();
                    } else {
                        $('#password').hide();
                        $('.avgrund-popup-room').height(200);
                    }
                }
                </script>
            </div>
        </div>
    </div>
</div>